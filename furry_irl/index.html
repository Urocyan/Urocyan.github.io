<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<style>
	#bodyCont {
		width: 100%;
	}
	.imgResult > img {
		object-fit: scale-down;
		max-width: 100%;
		max-height: 100%;
		margin-left: auto;
		margin-right: auto;
	}
</style>
<script>
$(document).ready( function() {
	$(".panel-body").css({"max-height":(window.innerHeight * 0.7),"overflow":"scroll"});
	var redditAPIBase = "https://api.reddit.com/r/furry_irl/"+$("#postTypes").find(":selected").text()+".json";
	var urls = [];
	function moreIRL() {
		redditAPIBase = "https://api.reddit.com/r/furry_irl/"+$("#postTypes").find(":selected").text()+".json";
		$.ajax({
				type: "GET",
				url: redditAPIBase,
				dataType: "json",
				success: function( results ) {
					var listings = results.data.children.data;
					urls = [];
					$.each(results.data.children, function(i, item) {
						var thisURL = item.data.url;
						if(thisURL.indexOf(".jpg") > -1 || thisURL.indexOf(".png") > -1 || thisURL.indexOf(".gif") > -1) {
							urls.push(item.data.url);
						}
					});
				},
				complete: function() {
					var entry = Math.floor(Math.random() * urls.length);
					if(urls[entry]) {
						$("#irlHolder").html($("<div>").addClass("imgResult").html("<img src='"+urls[entry]+"'>"));
					}
				}
		});
	}
	moreIRL();
	$("#morePls").click( function() {
		moreIRL();
	});
});	
</script>
</head>
<body>
<div class="container-fluid" id="bodyCont">
	<div class="panel panel-default" style="width:100%; max-height:100%;text-align:center;">
		<div class="panel-heading">
		<h3>Furry_IRL</h3>
		</div>
		<div class="panel-body" id="irlHolder">
		</div>
		<div class='panel-footer'>
			<button class='btn btn-info' id="morePls"><span class="glyphicon glyphicon-refresh"></span></button>
			<div class="form-group">
				<select class="form-control" id="postTypes">
					<option active>best</option>
					<option>hot</option>
					<option>new</option>
					<option>top</option>
					<option>random</option>
				</select>
			</div>
		</div>
	</div>
</div>
</body>
</html>
